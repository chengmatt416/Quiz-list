<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>終極診斷</title>
</head>
<body>
    <h1>應用程式狀態檢查</h1>
    <div id="status" style="border: 2px solid black; padding: 10px; font-family: monospace; white-space: pre-wrap;"></div>
    <hr>
    <div id="exam-list-container"></div>

    <script>
        const statusDiv = document.getElementById('status');
        function logStatus(message, isError = false) {
            const p = document.createElement('p');
            const time = new Date().toLocaleTimeString();
            p.textContent = `[${time}] ${message}`;
            p.style.color = isError ? 'red' : 'green';
            p.style.margin = '5px 0';
            statusDiv.appendChild(p);
        }

        try {
            logStatus("腳本開始執行。");

            document.addEventListener('DOMContentLoaded', function() {
                logStatus("DOM已完全載入 (DOMContentLoaded 事件觸發)。");
                
                const container = document.getElementById('exam-list-container');
                if (!container) {
                    logStatus("致命錯誤：找不到 'exam-list-container' 元件！", true);
                    return;
                }
                logStatus("成功找到 'exam-list-container' 元件。");
                
                const initialData = [ { subject: "測試科目", chapter: "第一章", questions: 10 } ];
                logStatus(`建立 initialData 成功，包含 ${initialData.length} 個項目。`);
                
                container.innerHTML = '<h2>準備渲染清單...</h2>';
                logStatus("已設定 container 準備渲染。");
                
                let itemsRendered = 0;
                initialData.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = `科目: ${item.subject}, 章節: ${item.chapter}`;
                    container.appendChild(li);
                    itemsRendered++;
                });
                logStatus(`渲染迴圈結束。成功渲染 ${itemsRendered} 個項目。`);
                
                if (itemsRendered > 0) {
                    logStatus("最終診斷成功！核心邏輯運作正常。");
                } else {
                    logStatus("診斷失敗：渲染迴圈未執行或未渲染任何項目。", true);
                }
            });

            logStatus("腳本已成功附加 DOMContentLoaded 事件監聽器，等待頁面載入...");

        } catch (error) {
            logStatus(`發生了無法捕捉的嚴重錯誤: ${error.message}`, true);
        }
    </script>
</body>
</html>

